{"ast":null,"code":"import _slicedToArray from \"/home/sam/Projects/fsa/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/home/sam/Projects/fsa/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sam/Projects/fsa/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/sam/Projects/fsa/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/sam/Projects/fsa/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/sam/Projects/fsa/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/sam/Projects/fsa/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/sam/Projects/fsa/client/src/App.js\";\nimport React from \"react\";\nimport { Group } from \"@vx/group\";\nimport { Tree } from \"@vx/hierarchy\";\nimport { LinearGradient } from \"@vx/gradient\";\nimport { hierarchy } from \"d3-hierarchy\";\nimport { pointRadial } from \"d3-shape\";\nimport axios from \"axios\";\nimport { LinkHorizontal, LinkVertical, LinkRadial, LinkHorizontalStep, LinkVerticalStep, LinkRadialStep, LinkHorizontalCurve, LinkVerticalCurve, LinkRadialCurve, LinkHorizontalLine, LinkVerticalLine, LinkRadialLine } from \"@vx/shape\";\nvar data = {\n  name: \"\",\n  children: [{\n    name: \"Lewis\",\n    id: 1,\n    gender: \"Female\",\n    hasParnter: true,\n    imageUrl: \"/avatar/gravator.jpg\"\n  }, {\n    name: \"Sam\",\n    id: 2,\n    partnerId: 1,\n    noParent: true,\n    children: [{\n      name: \"Anthony\",\n      id: 3,\n      gender: \"Female\",\n      isSource: true,\n      hasParnter: true\n    }, {\n      name: \"Pankaj\",\n      id: 5,\n      partnerId: 3,\n      gender: \"Male\",\n      noParent: true,\n      children: [{\n        name: \"Shaun\",\n        id: 100,\n        hasParnter: true\n      }, {\n        name: \"Danny\",\n        id: 102,\n        partnerId: 100,\n        gender: \"Female\",\n        noParent: true,\n        children: [{\n          name: \"D MM\",\n          gender: \"Female\"\n        }]\n      }, {\n        name: \"Sun\",\n        id: 102,\n        partnerId: 100,\n        gender: \"Female\",\n        noParent: true,\n        children: [{\n          name: \"B MM\"\n        }]\n      }, {\n        name: \"Rich\",\n        id: 200,\n        gender: \"Female\",\n        hasParnter: true,\n        imageUrl: \"/avatar/v-pk.jpeg\"\n      }, {\n        name: \"Ram\",\n        id: 201,\n        partnerId: 200,\n        noParent: true,\n        children: [{\n          name: \"Sierra\",\n          gender: \"Female\"\n        }, {\n          name: \"Sally\"\n        }, {\n          name: \"Nat\"\n        }, {\n          name: \"Mel\"\n        }]\n      }, {\n        name: \"Uttam\",\n        id: 300,\n        hasParnter: true,\n        imageUrl: \"/avatar/v-k.jpeg\"\n      }, {\n        name: \"Rachel\",\n        gender: \"Female\",\n        id: 301,\n        partnerId: 300,\n        noParent: true,\n        children: [{\n          name: \"Paddy\",\n          id: 3001,\n          imageUrl: \"/avatar/v-k-1.jpeg\"\n        }, {\n          name: \"Many\"\n        }]\n      }, {\n        name: \"Poker\",\n        id: 400,\n        hasParnter: true\n      }, {\n        name: \"Sebti\",\n        gender: \"Female\",\n        id: 401,\n        partnerId: 400,\n        noParent: true,\n        children: [{\n          name: \"Nally\",\n          gender: \"Female\"\n        }, {\n          name: \"C K\"\n        }]\n      }]\n    }, {\n      name: \"Douglas\",\n      id: 4,\n      partnerId: 3,\n      gender: \"Male\",\n      noParent: true,\n      imageUrl: \"/avatar/dummy.png\",\n      children: [{\n        name: \"Sam\"\n      }, {\n        name: \"Thomas\"\n      }]\n    }]\n  }]\n};\n\nvar _default =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(_default, _React$Component);\n\n  function _default(props) {\n    var _this;\n\n    _classCallCheck(this, _default);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(_default).call(this, props));\n    _this.state = {\n      data: [],\n      layout: \"cartesian\",\n      orientation: \"vertical\",\n      linkType: \"step\",\n      stepPercent: 1,\n      showOptions: false,\n      nodeId: null,\n      nodeName: \"\",\n      nodeImageUrl: \"\",\n      treeData: {},\n      intervalIsSet: false\n    };\n\n    _this.getDataFromDb = function () {\n      fetch(\"http://localhost:3001/api/getData\").then(function (data) {\n        return data.json();\n      }).then(function (res) {\n        return _this.setState({\n          data: res.data\n        });\n      });\n    };\n\n    _this.putDataToDB = function (message) {\n      var currentIds = _this.state.data.map(function (data) {\n        return data.id;\n      });\n\n      var idToBeAdded = 0;\n\n      while (currentIds.includes(idToBeAdded)) {\n        ++idToBeAdded;\n      }\n\n      axios.post(\"http://localhost:3001/api/putData\", {\n        id: idToBeAdded,\n        message: message\n      });\n    };\n\n    _this.deleteFromDB = function (idTodelete) {\n      var objIdToDelete = null;\n\n      _this.state.data.forEach(function (dat) {\n        if (dat.id === idTodelete) {\n          objIdToDelete = dat._id;\n        }\n      });\n\n      axios.delete(\"http://localhost:3001/api/deleteData\", {\n        data: {\n          id: objIdToDelete\n        }\n      });\n    };\n\n    _this.updateDB = function (idToUpdate, updateToApply) {\n      var objIdToUpdate = null;\n\n      _this.state.data.forEach(function (dat) {\n        if (dat.id === idToUpdate) {\n          objIdToUpdate = dat._id;\n        }\n      });\n\n      axios.post(\"http://localhost:3001/api/updateData\", {\n        id: objIdToUpdate,\n        update: {\n          message: updateToApply\n        }\n      });\n    };\n\n    _this.showNodeOptions = _this.showNodeOptions.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.updateTree = _this.updateTree.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.fetchNodeTree = _this.fetchNodeTree.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        treeData: data\n      });\n      this.getDataFromDb();\n\n      if (!this.state.intervalIsSet) {\n        var interval = setInterval(this.getDataFromDb, 1000);\n        this.setState({\n          intervalIsSet: interval\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.state.intervalIsSet) {\n        clearInterval(this.state.intervalIsSet);\n        this.setState({\n          intervalIsSet: null\n        });\n      }\n    }\n  }, {\n    key: \"showNodeOptions\",\n    value: function showNodeOptions(node) {\n      var showOptions = this.state.showOptions;\n      var imageUrl = node.data && node.data.imageUrl ? node.data.imageUrl : \"\";\n      var name = node.data && node.data.name ? node.data.name : \"\";\n      var nodeId = node.data && node.data.id ? node.data.id : \"\";\n      this.setState({\n        showOptions: !showOptions,\n        nodeImageUrl: imageUrl,\n        nodeName: name,\n        nodeId: nodeId\n      });\n    }\n  }, {\n    key: \"fetchNodeTree\",\n    value: function fetchNodeTree() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          nodeId = _this$state.nodeId,\n          showOptions = _this$state.showOptions;\n      fetch(\"/json/\".concat(nodeId, \".json\")).then(function (res) {\n        return res.status === 200 ? res.json() : {};\n      }).then(function (treeData) {\n        _this2.setState({\n          treeData: treeData,\n          showOptions: !showOptions\n        }, function () {\n          _this2.forceUpdate();\n        });\n      }).catch(function () {\n        alert(\"Invalid request!\");\n      });\n    }\n  }, {\n    key: \"updateTree\",\n    value: function updateTree(node) {\n      node.data.isExpanded = !node.data.isExpanded;\n      this.forceUpdate();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          width = _this$props.width,\n          height = _this$props.height,\n          _this$props$margin = _this$props.margin,\n          margin = _this$props$margin === void 0 ? {\n        top: 30,\n        left: 30,\n        right: 30,\n        bottom: 30\n      } : _this$props$margin;\n      var partners = [];\n      var nameLineHeight = 1.2;\n      var fontSize = 9;\n      var circleRadius = 24;\n      var avatarSize = circleRadius * 2;\n      var _this$state2 = this.state,\n          treeData = _this$state2.treeData,\n          layout = _this$state2.layout,\n          orientation = _this$state2.orientation,\n          linkType = _this$state2.linkType,\n          stepPercent = _this$state2.stepPercent,\n          showOptions = _this$state2.showOptions,\n          nodeImageUrl = _this$state2.nodeImageUrl,\n          nodeName = _this$state2.nodeName;\n      var innerWidth = width - margin.left - margin.right;\n      var innerHeight = height - margin.top - margin.bottom;\n      var origin;\n      var sizeWidth;\n      var sizeHeight;\n\n      if (layout === \"polar\") {\n        origin = {\n          x: innerWidth / 2,\n          y: innerHeight / 2\n        };\n        sizeWidth = 2 * Math.PI;\n        sizeHeight = Math.min(innerWidth, innerHeight) / 2;\n      } else {\n        origin = {\n          x: 0,\n          y: 0\n        };\n\n        if (orientation === \"vertical\") {\n          sizeWidth = innerWidth;\n          sizeHeight = innerHeight;\n          /* As root note is hidden, adjust tree's Y positioning */\n\n          origin.y -= sizeHeight / 10;\n        } else {\n          sizeWidth = innerHeight;\n          sizeHeight = innerWidth;\n          /* As root note is hidden, adjust tree's X positioning */\n\n          origin.x -= sizeHeight / 10;\n        }\n      }\n\n      var LinkComponent;\n\n      if (layout === \"polar\") {\n        if (linkType === \"step\") {\n          LinkComponent = LinkRadialStep;\n        } else if (linkType === \"curve\") {\n          LinkComponent = LinkRadialCurve;\n        } else if (linkType === \"line\") {\n          LinkComponent = LinkRadialLine;\n        } else {\n          LinkComponent = LinkRadial;\n        }\n      } else {\n        if (orientation === \"vertical\") {\n          if (linkType === \"step\") {\n            LinkComponent = LinkVerticalStep;\n          } else if (linkType === \"curve\") {\n            LinkComponent = LinkVerticalCurve;\n          } else if (linkType === \"line\") {\n            LinkComponent = LinkVerticalLine;\n          } else {\n            LinkComponent = LinkVertical;\n          }\n        } else {\n          if (linkType === \"step\") {\n            LinkComponent = LinkHorizontalStep;\n          } else if (linkType === \"curve\") {\n            LinkComponent = LinkHorizontalCurve;\n          } else if (linkType === \"line\") {\n            LinkComponent = LinkHorizontalLine;\n          } else {\n            LinkComponent = LinkHorizontal;\n          }\n        }\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389\n        },\n        __self: this\n      }, \"Change View\"), React.createElement(\"div\", {\n        style: {\n          color: \"rgba(38, 150, 136, 1.000)\",\n          fontSize: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391\n        },\n        __self: this\n      }, \"layout:\"), React.createElement(\"select\", {\n        onClick: function onClick(e) {\n          return e.stopPropagation();\n        },\n        onChange: function onChange(e) {\n          return _this3.setState({\n            layout: e.target.value\n          });\n        },\n        value: layout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"cartesian\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397\n        },\n        __self: this\n      }, \"cartesian\"), React.createElement(\"option\", {\n        value: \"polar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398\n        },\n        __self: this\n      }, \"polar\")), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401\n        },\n        __self: this\n      }, \"orientation:\"), React.createElement(\"select\", {\n        onClick: function onClick(e) {\n          return e.stopPropagation();\n        },\n        onChange: function onChange(e) {\n          return _this3.setState({\n            orientation: e.target.value\n          });\n        },\n        value: orientation,\n        disabled: layout === 'polar',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"vertical\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408\n        },\n        __self: this\n      }, \"vertical\"), React.createElement(\"option\", {\n        value: \"horizontal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409\n        },\n        __self: this\n      }, \"horizontal\")), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 412\n        },\n        __self: this\n      }, \"link:\"), React.createElement(\"select\", {\n        onClick: function onClick(e) {\n          return e.stopPropagation();\n        },\n        onChange: function onChange(e) {\n          return _this3.setState({\n            linkType: e.target.value\n          });\n        },\n        value: linkType,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 413\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"diagonal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418\n        },\n        __self: this\n      }, \"diagonal\"), React.createElement(\"option\", {\n        value: \"step\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419\n        },\n        __self: this\n      }, \"step\"), React.createElement(\"option\", {\n        value: \"curve\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420\n        },\n        __self: this\n      }, \"curve\"), React.createElement(\"option\", {\n        value: \"line\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421\n        },\n        __self: this\n      }, \"line\")), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424\n        },\n        __self: this\n      }, \"step:\"), React.createElement(\"input\", {\n        onClick: function onClick(e) {\n          return e.stopPropagation();\n        },\n        type: \"range\",\n        min: 0,\n        max: 1,\n        step: 0.1,\n        onChange: function onChange(e) {\n          return _this3.setState({\n            stepPercent: e.target.value\n          });\n        },\n        value: stepPercent,\n        disabled: linkType !== 'step' || layout === 'polar',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425\n        },\n        __self: this\n      })), React.createElement(\"svg\", {\n        width: width,\n        height: height,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436\n        },\n        __self: this\n      }, React.createElement(LinearGradient, {\n        id: \"lgFemale\",\n        from: \"#fd9b93\",\n        to: \"#fe6e9e\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438\n        },\n        __self: this\n      }), React.createElement(LinearGradient, {\n        id: \"lgMale\",\n        from: \"#13ea58\",\n        to: \"#059a35\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440\n        },\n        __self: this\n      }), React.createElement(LinearGradient, {\n        id: \"lgSpouse\",\n        from: \"#f3f3a7\",\n        to: \"#ffff00\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 442\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        width: width,\n        height: height,\n        rx: 0,\n        fill: \"#272b4d\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 443\n        },\n        __self: this\n      }), React.createElement(Group, {\n        top: margin.top,\n        left: margin.left,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 444\n        },\n        __self: this\n      }, React.createElement(Tree, {\n        root: hierarchy(treeData, function (d) {\n          return d.isExpanded ? null : d.children;\n        }),\n        size: [sizeWidth, sizeHeight],\n        separation: function separation(a, b) {\n          return (a.parent === b.parent ? 0.5 : 0.75) / a.depth;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445\n        },\n        __self: this\n      }, function (data) {\n        return React.createElement(Group, {\n          top: origin.y,\n          left: origin.x,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 455\n          },\n          __self: this\n        }, data.links().map(function (link, i) {\n          if (link.target.data.hasParnter) {\n            partners.push(link.target);\n          }\n          /* Do not show the link from root empty object */\n\n\n          if (link.source.depth === 0) {\n            return null;\n          }\n\n          if (link.target.data.noParent === true) {\n            return null;\n          }\n\n          return React.createElement(LinkComponent, {\n            data: link,\n            percent: +stepPercent,\n            stroke: \"#374469\",\n            strokeWidth: \"1\",\n            fill: \"none\",\n            key: i,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 469\n            },\n            __self: this\n          });\n        }), data.links().map(function (link, i) {\n          if (typeof link.target.data.partnerId !== \"number\") {\n            return null;\n          }\n\n          var nodePartnerId = link.target.data.partnerId;\n          var linkSource = partners.filter(function (partner) {\n            return partner.data.id === nodePartnerId ? partner : null;\n          });\n          link.source = linkSource[0];\n          return link.source !== undefined ? React.createElement(LinkComponent, {\n            data: link,\n            percent: +stepPercent,\n            stroke: \"#374469\",\n            strokeWidth: \"1\",\n            fill: \"none\",\n            key: i,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 493\n            },\n            __self: this\n          }) : null;\n        }), data.descendants().map(function (node, key) {\n          /* Do not show the empty root object */\n          if (node.depth === 0) {\n            return null;\n          }\n\n          var gender = node.data.gender;\n          var isFemale = gender === \"Female\" ? true : false;\n          var name = node.data.name || \"\";\n          var nameLength = name.length * 4;\n          var top;\n          var left;\n\n          if (layout === \"polar\") {\n            var _pointRadial = pointRadial(node.x, node.y),\n                _pointRadial2 = _slicedToArray(_pointRadial, 2),\n                radialX = _pointRadial2[0],\n                radialY = _pointRadial2[1];\n\n            top = radialY;\n            left = radialX;\n          } else {\n            if (orientation === \"vertical\") {\n              top = node.y;\n              left = node.x;\n            } else {\n              top = node.x;\n              left = node.y;\n            }\n          }\n\n          var isSource = node.data.isSource;\n          var imageId = \"image_\" + key;\n          var imageUrl = node.data.imageUrl;\n          var hasImage = imageUrl !== undefined && imageUrl !== \"\";\n          return React.createElement(Group, {\n            top: top,\n            left: left,\n            key: key,\n            className: isSource !== true ? \"node-group\" : \"\",\n            onClick: function onClick() {\n              return isSource !== true ? _this3.showNodeOptions(node) : void 0;\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 534\n            },\n            __self: this\n          }, hasImage === true && imageUrl !== \"\" && React.createElement(\"defs\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 546\n            },\n            __self: this\n          }, React.createElement(\"pattern\", {\n            id: imageId,\n            x: circleRadius,\n            y: circleRadius,\n            patternUnits: \"userSpaceOnUse\",\n            height: avatarSize,\n            width: avatarSize,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 547\n            },\n            __self: this\n          }, React.createElement(\"image\", {\n            x: \"0\",\n            y: \"0\",\n            xlinkHref: imageUrl,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 555\n            },\n            __self: this\n          }))), React.createElement(\"circle\", {\n            r: circleRadius,\n            fill: hasImage ? \"url('#\" + imageId + \"')\" : isSource ? isFemale ? \"url('#lgFemale')\" : \"url('#lgMale')\" : node.data.isPartner !== true ? \"#272b4d\" : \"url('#lgSpouse')\",\n            className: !isSource ? \"node \" + (isFemale ? \"female\" : \"male\") : \"\",\n            strokeWidth: 1,\n            strokeDasharray: !node.data.children && !node.data.hasParnter ? \"2,2\" : \"0\",\n            strokeOpacity: 1,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 559\n            },\n            __self: this\n          }), \")}\", React.createElement(\"rect\", {\n            y: -nameLineHeight + fontSize / 2,\n            x: -nameLength,\n            height: fontSize * 2,\n            width: nameLength * 2,\n            className: \"node-text-bg\",\n            rx: \"5\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 586\n            },\n            __self: this\n          }), React.createElement(\"text\", {\n            dy: circleRadius - fontSize,\n            fontSize: fontSize,\n            fontFamily: \"Arial\",\n            textAnchor: \"middle\",\n            style: {\n              pointerEvents: \"none\"\n            },\n            className: \"node\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 594\n            },\n            __self: this\n          }, name));\n        }));\n      }))), showOptions === true && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 613\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"test\",\n        className: \"modal is-active\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 614\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"modal-background\",\n        onClick: this.showNodeOptions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 615\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"modal-card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 619\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: \"modal-card-head\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 620\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"modal-card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 621\n        },\n        __self: this\n      }, \"What next?\"), React.createElement(\"button\", {\n        className: \"delete\",\n        \"aria-label\": \"close\",\n        onClick: this.showNodeOptions,\n        title: \"Close\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 622\n        },\n        __self: this\n      })), React.createElement(\"section\", {\n        className: \"modal-card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 629\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 630\n        },\n        __self: this\n      }, \"Do you want to see the family tree of the member\", \" \", React.createElement(\"img\", {\n        src: nodeImageUrl,\n        width: avatarSize,\n        height: avatarSize,\n        alt: nodeName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 632\n        },\n        __self: this\n      }), \" \", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 638\n        },\n        __self: this\n      }, nodeName), \"?\")), React.createElement(\"footer\", {\n        className: \"modal-card-foot\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 641\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"button is-success is-pulled-right\",\n        onClick: this.fetchNodeTree,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 642\n        },\n        __self: this\n      }, \"Show Tree\"), React.createElement(\"button\", {\n        className: \"button is-pulled-right\",\n        onClick: this.showNodeOptions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 648\n        },\n        __self: this\n      }, \"Cancel\"))))));\n    }\n  }]);\n\n  return _default;\n}(React.Component);\n\nexport { _default as default };","map":{"version":3,"sources":["/home/sam/Projects/fsa/client/src/App.js"],"names":["React","Group","Tree","LinearGradient","hierarchy","pointRadial","axios","LinkHorizontal","LinkVertical","LinkRadial","LinkHorizontalStep","LinkVerticalStep","LinkRadialStep","LinkHorizontalCurve","LinkVerticalCurve","LinkRadialCurve","LinkHorizontalLine","LinkVerticalLine","LinkRadialLine","data","name","children","id","gender","hasParnter","imageUrl","partnerId","noParent","isSource","props","state","layout","orientation","linkType","stepPercent","showOptions","nodeId","nodeName","nodeImageUrl","treeData","intervalIsSet","getDataFromDb","fetch","then","json","res","setState","putDataToDB","message","currentIds","map","idToBeAdded","includes","post","deleteFromDB","idTodelete","objIdToDelete","forEach","dat","_id","delete","updateDB","idToUpdate","updateToApply","objIdToUpdate","update","showNodeOptions","bind","updateTree","fetchNodeTree","interval","setInterval","clearInterval","node","status","forceUpdate","catch","alert","isExpanded","width","height","margin","top","left","right","bottom","partners","nameLineHeight","fontSize","circleRadius","avatarSize","innerWidth","innerHeight","origin","sizeWidth","sizeHeight","x","y","Math","PI","min","LinkComponent","color","e","stopPropagation","target","value","d","a","b","parent","depth","links","link","i","push","source","nodePartnerId","linkSource","filter","partner","undefined","descendants","key","isFemale","nameLength","length","radialX","radialY","imageId","hasImage","isPartner","pointerEvents","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Group } from \"@vx/group\";\nimport { Tree } from \"@vx/hierarchy\";\nimport { LinearGradient } from \"@vx/gradient\";\nimport { hierarchy } from \"d3-hierarchy\";\nimport { pointRadial } from \"d3-shape\";\nimport axios from \"axios\";\n\nimport {\n  LinkHorizontal,\n  LinkVertical,\n  LinkRadial,\n  LinkHorizontalStep,\n  LinkVerticalStep,\n  LinkRadialStep,\n  LinkHorizontalCurve,\n  LinkVerticalCurve,\n  LinkRadialCurve,\n  LinkHorizontalLine,\n  LinkVerticalLine,\n  LinkRadialLine\n} from \"@vx/shape\";\n\nconst data = {\n  name: \"\",\n  children: [\n    {\n      name: \"Lewis\",\n      id: 1,\n      gender: \"Female\",\n      hasParnter: true,\n      imageUrl: \"/avatar/gravator.jpg\"\n    },\n    {\n      name: \"Sam\",\n      id: 2,\n      partnerId: 1,\n      noParent: true,\n      children: [\n        {\n          name: \"Anthony\",\n          id: 3,\n          gender: \"Female\",\n          isSource: true,\n          hasParnter: true\n        },\n        {\n          name: \"Pankaj\",\n          id: 5,\n          partnerId: 3,\n          gender: \"Male\",\n          noParent: true,\n          children: [\n            {\n              name: \"Shaun\",\n              id: 100,\n              hasParnter: true\n            },\n            {\n              name: \"Danny\",\n              id: 102,\n              partnerId: 100,\n              gender: \"Female\",\n              noParent: true,\n              children: [{ name: \"D MM\", gender: \"Female\" }]\n            },\n            {\n              name: \"Sun\",\n              id: 102,\n              partnerId: 100,\n              gender: \"Female\",\n              noParent: true,\n              children: [{ name: \"B MM\" }]\n            },\n            {\n              name: \"Rich\",\n              id: 200,\n              gender: \"Female\",\n              hasParnter: true,\n              imageUrl: \"/avatar/v-pk.jpeg\"\n            },\n            {\n              name: \"Ram\",\n              id: 201,\n              partnerId: 200,\n              noParent: true,\n              children: [\n                {\n                  name: \"Sierra\",\n                  gender: \"Female\"\n                },\n                {\n                  name: \"Sally\"\n                },\n                {\n                  name: \"Nat\"\n                },\n                {\n                  name: \"Mel\"\n                }\n              ]\n            },\n\n            {\n              name: \"Uttam\",\n              id: 300,\n              hasParnter: true,\n              imageUrl: \"/avatar/v-k.jpeg\"\n            },\n            {\n              name: \"Rachel\",\n              gender: \"Female\",\n              id: 301,\n              partnerId: 300,\n              noParent: true,\n              children: [\n                {\n                  name: \"Paddy\",\n                  id: 3001,\n                  imageUrl: \"/avatar/v-k-1.jpeg\"\n                },\n                {\n                  name: \"Many\"\n                }\n              ]\n            },\n            {\n              name: \"Poker\",\n              id: 400,\n              hasParnter: true\n            },\n            {\n              name: \"Sebti\",\n              gender: \"Female\",\n              id: 401,\n              partnerId: 400,\n              noParent: true,\n              children: [\n                {\n                  name: \"Nally\",\n                  gender: \"Female\"\n                },\n                {\n                  name: \"C K\"\n                }\n              ]\n            }\n          ]\n        },\n\n        {\n          name: \"Douglas\",\n          id: 4,\n          partnerId: 3,\n          gender: \"Male\",\n          noParent: true,\n          imageUrl: \"/avatar/dummy.png\",\n          children: [\n            {\n              name: \"Sam\"\n            },\n            {\n              name: \"Thomas\"\n            }\n          ]\n        }\n      ]\n    }\n  ]\n};\n\nexport default class extends React.Component {\n  state = {\n    data: [],\n    layout: \"cartesian\",\n    orientation: \"vertical\",\n    linkType: \"step\",\n    stepPercent: 1,\n    showOptions: false,\n    nodeId: null,\n    nodeName: \"\",\n    nodeImageUrl: \"\",\n    treeData: {},\n    intervalIsSet: false\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.showNodeOptions = this.showNodeOptions.bind(this);\n    this.updateTree = this.updateTree.bind(this);\n    this.fetchNodeTree = this.fetchNodeTree.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({ treeData: data });\n    this.getDataFromDb();\n    if (!this.state.intervalIsSet) {\n      let interval = setInterval(this.getDataFromDb, 1000);\n      this.setState({ intervalIsSet: interval });\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.state.intervalIsSet) {\n      clearInterval(this.state.intervalIsSet);\n      this.setState({ intervalIsSet: null });\n    }\n  }\n\n  getDataFromDb = () => {\n    fetch(\"http://localhost:3001/api/getData\")\n      .then(data => data.json())\n      .then(res => this.setState({ data: res.data }));\n  };\n\n  putDataToDB = message => {\n    let currentIds = this.state.data.map(data => data.id);\n    let idToBeAdded = 0;\n    while (currentIds.includes(idToBeAdded)) {\n      ++idToBeAdded;\n    }\n\n    axios.post(\"http://localhost:3001/api/putData\", {\n      id: idToBeAdded,\n      message: message\n    });\n  };\n\n  deleteFromDB = idTodelete => {\n    let objIdToDelete = null;\n    this.state.data.forEach(dat => {\n      if (dat.id === idTodelete) {\n        objIdToDelete = dat._id;\n      }\n    });\n\n    axios.delete(\"http://localhost:3001/api/deleteData\", {\n      data: {\n        id: objIdToDelete\n      }\n    });\n  };\n\n  updateDB = (idToUpdate, updateToApply) => {\n    let objIdToUpdate = null;\n    this.state.data.forEach(dat => {\n      if (dat.id === idToUpdate) {\n        objIdToUpdate = dat._id;\n      }\n    });\n\n    axios.post(\"http://localhost:3001/api/updateData\", {\n      id: objIdToUpdate,\n      update: { message: updateToApply }\n    });\n  };\n\n  showNodeOptions(node) {\n    const { showOptions } = this.state;\n    const imageUrl = node.data && node.data.imageUrl ? node.data.imageUrl : \"\";\n    const name = node.data && node.data.name ? node.data.name : \"\";\n    const nodeId = node.data && node.data.id ? node.data.id : \"\";\n    this.setState({\n      showOptions: !showOptions,\n      nodeImageUrl: imageUrl,\n      nodeName: name,\n      nodeId: nodeId\n    });\n  }\n\n  fetchNodeTree() {\n    const { nodeId, showOptions } = this.state;\n    fetch(`/json/${nodeId}.json`)\n      .then(res => {\n        return res.status === 200 ? res.json() : {};\n      })\n      .then(treeData => {\n        this.setState({ treeData: treeData, showOptions: !showOptions }, () => {\n          this.forceUpdate();\n        });\n      })\n      .catch(() => {\n        alert(\"Invalid request!\");\n      });\n  }\n\n  updateTree(node) {\n    node.data.isExpanded = !node.data.isExpanded;\n    this.forceUpdate();\n  }\n\n  render() {\n    const {\n      width,\n      height,\n      margin = {\n        top: 30,\n        left: 30,\n        right: 30,\n        bottom: 30\n      }\n    } = this.props;\n    let partners = [];\n    const nameLineHeight = 1.2;\n    const fontSize = 9;\n\n    const circleRadius = 24;\n    const avatarSize = circleRadius * 2;\n\n    const {\n      treeData,\n      layout,\n      orientation,\n      linkType,\n      stepPercent,\n      showOptions,\n      nodeImageUrl,\n      nodeName\n    } = this.state;\n\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n\n    let origin;\n    let sizeWidth;\n    let sizeHeight;\n\n    if (layout === \"polar\") {\n      origin = {\n        x: innerWidth / 2,\n        y: innerHeight / 2\n      };\n      sizeWidth = 2 * Math.PI;\n      sizeHeight = Math.min(innerWidth, innerHeight) / 2;\n    } else {\n      origin = { x: 0, y: 0 };\n      if (orientation === \"vertical\") {\n        sizeWidth = innerWidth;\n        sizeHeight = innerHeight;\n        /* As root note is hidden, adjust tree's Y positioning */\n        origin.y -= sizeHeight / 10;\n      } else {\n        sizeWidth = innerHeight;\n        sizeHeight = innerWidth;\n        /* As root note is hidden, adjust tree's X positioning */\n        origin.x -= sizeHeight / 10;\n      }\n    }\n\n    let LinkComponent;\n\n    if (layout === \"polar\") {\n      if (linkType === \"step\") {\n        LinkComponent = LinkRadialStep;\n      } else if (linkType === \"curve\") {\n        LinkComponent = LinkRadialCurve;\n      } else if (linkType === \"line\") {\n        LinkComponent = LinkRadialLine;\n      } else {\n        LinkComponent = LinkRadial;\n      }\n    } else {\n      if (orientation === \"vertical\") {\n        if (linkType === \"step\") {\n          LinkComponent = LinkVerticalStep;\n        } else if (linkType === \"curve\") {\n          LinkComponent = LinkVerticalCurve;\n        } else if (linkType === \"line\") {\n          LinkComponent = LinkVerticalLine;\n        } else {\n          LinkComponent = LinkVertical;\n        }\n      } else {\n        if (linkType === \"step\") {\n          LinkComponent = LinkHorizontalStep;\n        } else if (linkType === \"curve\") {\n          LinkComponent = LinkHorizontalCurve;\n        } else if (linkType === \"line\") {\n          LinkComponent = LinkHorizontalLine;\n        } else {\n          LinkComponent = LinkHorizontal;\n        }\n      }\n    }\n\n    return (\n      <div>\n        <button>Change View</button>\n        <div style={{ color: \"rgba(38, 150, 136, 1.000)\", fontSize: 10 }}>\n          <label>layout:</label>\n          <select\n            onClick={e => e.stopPropagation()}\n            onChange={e => this.setState({ layout: e.target.value })}\n            value={layout}\n          >\n            <option value=\"cartesian\">cartesian</option>\n            <option value=\"polar\">polar</option>\n          </select>\n\n          <label>orientation:</label>\n          <select\n            onClick={e => e.stopPropagation()}\n            onChange={e => this.setState({ orientation: e.target.value })}\n            value={orientation}\n            disabled={layout === 'polar'}\n          >\n            <option value=\"vertical\">vertical</option>\n            <option value=\"horizontal\">horizontal</option>\n          </select>\n\n          <label>link:</label>\n          <select\n            onClick={e => e.stopPropagation()}\n            onChange={e => this.setState({ linkType: e.target.value })}\n            value={linkType}\n          >\n            <option value=\"diagonal\">diagonal</option>\n            <option value=\"step\">step</option>\n            <option value=\"curve\">curve</option>\n            <option value=\"line\">line</option>\n          </select>\n\n          <label>step:</label>\n          <input\n            onClick={e => e.stopPropagation()}\n            type=\"range\"\n            min={0}\n            max={1}\n            step={0.1}\n            onChange={e => this.setState({ stepPercent: e.target.value })}\n            value={stepPercent}\n            disabled={linkType !== 'step' || layout === 'polar'}\n          />\n        </div>\n        <svg width={width} height={height}>\n          {/* LinearGradient - lgFemale - Pink gradient */}\n          <LinearGradient id=\"lgFemale\" from=\"#fd9b93\" to=\"#fe6e9e\" />\n          {/* LinearGradient - lgMale - Green gradient */}\n          <LinearGradient id=\"lgMale\" from=\"#13ea58\" to=\"#059a35\" />\n          {/* LinearGradient - lgSpouse - Yellow gradient */}\n          <LinearGradient id=\"lgSpouse\" from=\"#f3f3a7\" to=\"#ffff00\" />\n          <rect width={width} height={height} rx={0} fill=\"#272b4d\" />\n          <Group top={margin.top} left={margin.left}>\n            <Tree\n              root={hierarchy(treeData, d =>\n                d.isExpanded ? null : d.children\n              )}\n              size={[sizeWidth, sizeHeight]}\n              separation={(a, b) =>\n                (a.parent === b.parent ? 0.5 : 0.75) / a.depth\n              }\n            >\n              {data => (\n                <Group top={origin.y} left={origin.x}>\n                  {data.links().map((link, i) => {\n                    if (link.target.data.hasParnter) {\n                      partners.push(link.target);\n                    }\n                    /* Do not show the link from root empty object */\n                    if (link.source.depth === 0) {\n                      return null;\n                    }\n                    if (link.target.data.noParent === true) {\n                      return null;\n                    }\n\n                    return (\n                      <LinkComponent\n                        data={link}\n                        percent={+stepPercent}\n                        stroke=\"#374469\"\n                        strokeWidth=\"1\"\n                        fill=\"none\"\n                        key={i}\n                      />\n                    );\n                  })}\n                  {/* Draw Partners Line */}\n                  {data.links().map((link, i) => {\n                    if (typeof link.target.data.partnerId !== \"number\") {\n                      return null;\n                    }\n                    const nodePartnerId = link.target.data.partnerId;\n\n                    const linkSource = partners.filter(partner => {\n                      return partner.data.id === nodePartnerId ? partner : null;\n                    });\n\n                    link.source = linkSource[0];\n\n                    return link.source !== undefined ? (\n                      <LinkComponent\n                        data={link}\n                        percent={+stepPercent}\n                        stroke=\"#374469\"\n                        strokeWidth=\"1\"\n                        fill=\"none\"\n                        key={i}\n                      />\n                    ) : null;\n                  })}\n\n                  {data.descendants().map((node, key) => {\n                    /* Do not show the empty root object */\n                    if (node.depth === 0) {\n                      return null;\n                    }\n                    const gender = node.data.gender;\n                    const isFemale = gender === \"Female\" ? true : false;\n                    const name = node.data.name || \"\";\n                    const nameLength = name.length * 4;\n\n                    let top;\n                    let left;\n                    if (layout === \"polar\") {\n                      const [radialX, radialY] = pointRadial(node.x, node.y);\n                      top = radialY;\n                      left = radialX;\n                    } else {\n                      if (orientation === \"vertical\") {\n                        top = node.y;\n                        left = node.x;\n                      } else {\n                        top = node.x;\n                        left = node.y;\n                      }\n                    }\n                    const isSource = node.data.isSource;\n                    const imageId = \"image_\" + key;\n                    const imageUrl = node.data.imageUrl;\n                    const hasImage = imageUrl !== undefined && imageUrl !== \"\";\n                    return (\n                      <Group\n                        top={top}\n                        left={left}\n                        key={key}\n                        className={isSource !== true ? \"node-group\" : \"\"}\n                        onClick={() => {\n                          return isSource !== true\n                            ? this.showNodeOptions(node)\n                            : void 0;\n                        }}\n                      >\n                        {hasImage === true && imageUrl !== \"\" && (\n                          <defs>\n                            <pattern\n                              id={imageId}\n                              x={circleRadius}\n                              y={circleRadius}\n                              patternUnits=\"userSpaceOnUse\"\n                              height={avatarSize}\n                              width={avatarSize}\n                            >\n                              <image x=\"0\" y=\"0\" xlinkHref={imageUrl} />\n                            </pattern>\n                          </defs>\n                        )}\n                        <circle\n                          r={circleRadius}\n                          fill={\n                            hasImage\n                              ? \"url('#\" + imageId + \"')\"\n                              : isSource\n                              ? isFemale\n                                ? \"url('#lgFemale')\"\n                                : \"url('#lgMale')\"\n                              : node.data.isPartner !== true\n                              ? \"#272b4d\"\n                              : \"url('#lgSpouse')\"\n                          }\n                          className={\n                            !isSource\n                              ? \"node \" + (isFemale ? \"female\" : \"male\")\n                              : \"\"\n                          }\n                          strokeWidth={1}\n                          strokeDasharray={\n                            !node.data.children && !node.data.hasParnter\n                              ? \"2,2\"\n                              : \"0\"\n                          }\n                          strokeOpacity={1}\n                        />\n                        )}\n                        <rect\n                          y={-nameLineHeight + fontSize / 2}\n                          x={-nameLength}\n                          height={fontSize * 2}\n                          width={nameLength * 2}\n                          className=\"node-text-bg\"\n                          rx=\"5\"\n                        />\n                        <text\n                          dy={circleRadius - fontSize}\n                          fontSize={fontSize}\n                          fontFamily=\"Arial\"\n                          textAnchor={\"middle\"}\n                          style={{ pointerEvents: \"none\" }}\n                          className=\"node\"\n                        >\n                          {name}\n                        </text>\n                      </Group>\n                    );\n                  })}\n                </Group>\n              )}\n            </Tree>\n          </Group>\n        </svg>\n        {showOptions === true && (\n          <React.Fragment>\n            <div id=\"test\" className=\"modal is-active\">\n              <div\n                className=\"modal-background\"\n                onClick={this.showNodeOptions}\n              />\n              <div className=\"modal-card\">\n                <header className=\"modal-card-head\">\n                  <p className=\"modal-card-title\">What next?</p>\n                  <button\n                    className=\"delete\"\n                    aria-label=\"close\"\n                    onClick={this.showNodeOptions}\n                    title=\"Close\"\n                  />\n                </header>\n                <section className=\"modal-card-body\">\n                  <div className=\"content\">\n                    Do you want to see the family tree of the member{\" \"}\n                    <img\n                      src={nodeImageUrl}\n                      width={avatarSize}\n                      height={avatarSize}\n                      alt={nodeName}\n                    />{\" \"}\n                    <b>{nodeName}</b>?\n                  </div>\n                </section>\n                <footer className=\"modal-card-foot\">\n                  <button\n                    className=\"button is-success is-pulled-right\"\n                    onClick={this.fetchNodeTree}\n                  >\n                    Show Tree\n                  </button>\n                  <button\n                    className=\"button is-pulled-right\"\n                    onClick={this.showNodeOptions}\n                  >\n                    Cancel\n                  </button>\n                </footer>\n              </div>\n            </div>\n          </React.Fragment>\n        )}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}